#Port scanning a network is illegal, do not use this code on a network without permission
import queue
import socket
import time
import threading
from queue import Queue


target = '192.168.0.1' #getway address
queue = Queue()
oneTimeModification = threading.Lock()

def portscan(port):
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    try: 
        con  = sock.connect((target, port))
        with oneTimeModification: 
             print('port',port)
        con.close()
    except:
        pass


def doThread():
    while True:
        worker = queue.get()
        portscan(worker)
        queue.task_done()


#range of ports to be checked at one go 
for i in range(600):
    t=threading.Thread(target=doThread)

    t.daemon = True
    t.start()

start = time.time()

for worker in range(1,100):
    queue.put(worker)

queue.join()


